<?xml version="1.0" encoding="utf-8"?>
<Defs>
    <!-- Buff Effect (Always Applies When Exposed) -->
    <HediffDef>
        <defName>PolymerHarmony_Effect</defName>
        <label>Polymer Harmony</label>
        <description>This pawn is harmonized by the aura of a Kitsune.</description>
        <hediffClass>HediffWithComps</hediffClass>
        <isBad>false</isBad>
        <initialSeverity>0.01</initialSeverity>
        <stages>
            <li>
                <label>Soothed</label>
                <minSeverity>0.2</minSeverity>
                <capMods>
                    <li>
                        <capacity>Manipulation</capacity>
                        <offset>0.05</offset>
                    </li>
                    <li>
                        <capacity>Moving</capacity>
                        <offset>0.03</offset>
                    </li>
                    <li>
                        <capacity>Pain</capacity>
                        <offset>-0.1</offset>
                    </li>
                </capMods>
                <moodEffect>5</moodEffect>
            </li>
            <li>
                <label>Relaxed</label>
                <minSeverity>0.5</minSeverity>
                <capMods>
                    <li>
                        <capacity>Manipulation</capacity>
                        <offset>0.1</offset>
                    </li>
                    <li>
                        <capacity>Moving</capacity>
                        <offset>0.06</offset>
                    </li>
                    <li>
                        <capacity>Pain</capacity>
                        <offset>-0.2</offset>
                    </li>
                </capMods>
                <moodEffect>10</moodEffect>
            </li>
            <li>
                <label>Harmonized</label>
                <minSeverity>0.8</minSeverity>
                <capMods>
                    <li>
                        <capacity>Manipulation</capacity>
                        <offset>0.15</offset>
                    </li>
                    <li>
                        <capacity>Moving</capacity>
                        <offset>0.09</offset>
                    </li>
                    <li>
                        <capacity>Pain</capacity>
                        <offset>-0.3</offset>
                    </li>
                </capMods>
                <moodEffect>20</moodEffect>
            </li>
        </stages>
    </HediffDef>

    <!-- Addiction Hediff (Triggers If Addicted) -->
    <HediffDef>
        <defName>PolymerHarmony_Addiction</defName>
        <label>Polymer Harmony Addiction</label>
        <description>This pawn has become dependent on exposure to Polymer Harmony.</description>
        <hediffClass>Hediff_Addiction</hediffClass>
        <compProperties>
            <li Class="HediffCompProperties_Disappears">
                <severityDisappearThreshold>0.1</severityDisappearThreshold> <!-- When severity drops below 0.1, addiction is removed -->
            </li>
        </compProperties>
        <addictionNeed>PolymerHarmonyNeed</addictionNeed>
        <addictionSeverityPerDay>0.04</addictionSeverityPerDay> <!-- Severity increase when in withdrawal -->
        <causesNeed>PolymerHarmonyNeed</causesNeed>
    </HediffDef>

    <!-- Withdrawal Hediff (Only If Addicted and Need Hits 0) -->
    <HediffDef>
        <defName>PolymerHarmony_Withdrawal</defName>
        <label>Polymer Harmony Withdrawal</label>
        <description>This pawn is experiencing severe withdrawal symptoms from a lack of Polymer Harmony.</description>
        <hediffClass>HediffWithComps</hediffClass>
        <isBad>true</isBad>
        <initialSeverity>0.01</initialSeverity> <!-- Start immediately when need reaches 0 -->
        <severityPerDay>0.08</severityPerDay> <!-- How quickly withdrawal worsens -->
        <stages>
            <li>
                <label>Mild Withdrawal</label>
                <minSeverity>0.1</minSeverity>
                <capMods>
                    <li>
                        <capacity>Manipulation</capacity>
                        <offset>-0.1</offset>
                    </li>
                    <li>
                        <capacity>Moving</capacity>
                        <offset>-0.05</offset>
                    </li>
                </capMods>
                <moodEffect>-10</moodEffect>
                <painFactor>1.1</painFactor>
            </li>
            <li>
                <label>Severe Withdrawal</label>
                <minSeverity>0.5</minSeverity>
                <capMods>
                    <li>
                        <capacity>Manipulation</capacity>
                        <offset>-0.2</offset>
                    </li>
                    <li>
                        <capacity>Moving</capacity>
                        <offset>-0.1</offset>
                    </li>
                </capMods>
                <moodEffect>-20</moodEffect>
                <painFactor>1.3</painFactor>
                <mentalBreakCommonality>0.4</mentalBreakCommonality> <!-- Higher chance of mental breaks -->
            </li>
            <li>
                <label>Critical Withdrawal</label>
                <minSeverity>0.9</minSeverity>
                <capMods>
                    <li>
                        <capacity>Consciousness</capacity>
                        <offset>-1</offset> <!-- Forces coma -->
                    </li>
                </capMods>
                <moodEffect>-40</moodEffect>
            </li>
        </stages>
    </HediffDef>
</Defs>
